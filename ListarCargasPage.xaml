<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="CargaGestor.ListarCargasPage"
    Title="Listar Cargas">

    <VerticalStackLayout Padding="10" Spacing="10" VerticalOptions="FillAndExpand">

        <!-- Campo para filtro -->
        <Entry
            x:Name="entryFiltro"
            Placeholder="Filtrar cargas por CTE ou Status..."
            TextChanged="OnFiltroTextChanged" />

        <!-- CollectionView com as cargas -->
        <CollectionView
            x:Name="collectionViewCargas"
            SelectionMode="Single"
            SelectionChanged="OnCargaSelecionada"
            BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource OffBlack}}"
            VerticalOptions="FillAndExpand">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid
                        Margin="0,5"
                        Padding="10"
                        BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}"
                        InputTransparent="False">

                        <VerticalStackLayout>

                            <Label
                                Text="{Binding NumeroCTE}"
                                FontAttributes="Bold"
                                FontSize="18"
                                TextColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}" />

                            <Label
                                Text="{Binding DataCarregamento}"
                                FontSize="14"
                                TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}" />

                            <Label
                                Text="{Binding PesoKg, StringFormat='Peso: {0} kg'}"
                                FontSize="14"
                                TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}" />

                            <Label
                                Text="{Binding Status}"
                                FontAttributes="Italic"
                                FontSize="14"
                                TextColor="{AppThemeBinding Light={StaticResource Secondary}, Dark={StaticResource Magenta}}" />

                        </VerticalStackLayout>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

        <!-- BotÃµes Editar, Excluir e Sair -->
        <HorizontalStackLayout Spacing="20" HorizontalOptions="Center">

            <Button
                x:Name="btnEditar"
                Text="Editar"
                Clicked="OnEditarClicked"
                IsEnabled="False"
                WidthRequest="120" />

            <Button
                x:Name="btnExcluir"
                Text="Excluir"
                Clicked="OnExcluirClicked"
                IsEnabled="False"
                BackgroundColor="#D72631"
                TextColor="White"
                WidthRequest="120" />

            <Button
                Text="Sair"
                Clicked="OnSairClicked"
                BackgroundColor="#666"
                TextColor="White"
                WidthRequest="120" />

        </HorizontalStackLayout>

    </VerticalStackLayout>

</ContentPage>
